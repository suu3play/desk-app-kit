<Window x:Class="DeskAppKit.Client.Views.DiagnosticsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="診断" Height="500" Width="700"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ヘッダー -->
        <Border Grid.Row="0" Background="#2196F3" Padding="16,12">
            <TextBlock Text="システム診断" FontSize="20" FontWeight="Bold" Foreground="White"/>
        </Border>

        <!-- ヘルスチェック結果 -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="16">
            <StackPanel>
                <TextBlock Text="ヘルスチェック結果" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>

                <ItemsControl ItemsSource="{Binding HealthCheckResults}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#E0E0E0" BorderThickness="1" Margin="0,0,0,8" Padding="12" Background="White">
                                <Border.Effect>
                                    <DropShadowEffect Color="#CCCCCC" Direction="270" ShadowDepth="1" BlurRadius="4" Opacity="0.2"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- コンポーネント名 -->
                                    <TextBlock Grid.Row="0" Grid.Column="0"
                                               Text="{Binding Component}"
                                               FontSize="14" FontWeight="SemiBold" Margin="0,0,0,4"/>

                                    <!-- ステータス -->
                                    <TextBlock Grid.Row="0" Grid.Column="1"
                                               Text="{Binding StatusText}"
                                               Foreground="{Binding StatusColor}"
                                               FontWeight="Bold"/>

                                    <!-- メッセージ -->
                                    <TextBlock Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                                               Text="{Binding Message}"
                                               Foreground="#666" Margin="0,0,0,4"/>

                                    <!-- レスポンスタイム -->
                                    <TextBlock Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2"
                                               Foreground="#999" FontSize="11">
                                        <Run Text="応答時間: "/>
                                        <Run Text="{Binding ResponseTime, StringFormat={}{0:F2} ms}"/>
                                    </TextBlock>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <!-- 結果が空の場合 -->
                <TextBlock Text="ヘルスチェックを実行してください"
                           Foreground="#999"
                           HorizontalAlignment="Center"
                           Margin="0,32,0,0"
                           Visibility="{Binding HealthCheckResults.Count, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            </StackPanel>
        </ScrollViewer>

        <!-- ステータスバー -->
        <Border Grid.Row="2" Background="#F5F5F5" Padding="16,8" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <TextBlock Text="{Binding StatusMessage}" Foreground="#555"/>
        </Border>

        <!-- ボタン -->
        <Border Grid.Row="3" Background="#FAFAFA" Padding="16" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="ヘルスチェック実行" Command="{Binding RunHealthCheckCommand}"
                        Padding="16,8" Margin="0,0,8,0"
                        Background="#2196F3" Foreground="White" BorderThickness="0" Cursor="Hand"
                        IsEnabled="{Binding IsRunning, Converter={StaticResource InverseBooleanConverter}}"/>

                <Button Content="閉じる" Click="CloseButton_Click"
                        Padding="16,8"
                        Background="#9E9E9E" Foreground="White" BorderThickness="0" Cursor="Hand"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
