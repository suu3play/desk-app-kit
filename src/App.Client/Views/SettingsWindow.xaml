<Window x:Class="DeskAppKit.Client.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:enums="clr-namespace:DeskAppKit.Core.Enums;assembly=App.Core"
        Title="設定" Height="550" Width="600"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ヘッダー -->
        <Border Grid.Row="0" Background="#2196F3" Padding="20">
            <TextBlock Text="アプリケーション設定" FontSize="24" FontWeight="Bold" Foreground="White"/>
        </Border>

        <!-- コンテンツ -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="24">
            <StackPanel>
                <!-- StorageMode設定 -->
                <TextBlock Text="ストレージモード" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                <TextBlock TextWrapping="Wrap" Foreground="#666" Margin="0,0,0,8"
                           Text="データの保存方法を選択してください。変更後はアプリケーションの再起動が必要です。"/>

                <ComboBox ItemsSource="{Binding AvailableStorageModes}"
                          SelectedItem="{Binding SelectedStorageMode}"
                          Margin="0,0,0,24" Padding="8" FontSize="14"/>

                <Separator Margin="0,0,0,24"/>

                <!-- テーマ設定 -->
                <TextBlock Text="テーマ" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                <TextBlock TextWrapping="Wrap" Foreground="#666" Margin="0,0,0,8"
                           Text="アプリケーションの外観テーマを選択してください。変更は即座に反映されます。"/>

                <ComboBox ItemsSource="{Binding AvailableThemeModes}"
                          SelectedItem="{Binding SelectedThemeMode}"
                          Margin="0,0,0,24" Padding="8" FontSize="14"/>

                <Separator Margin="0,0,0,24"/>

                <!-- データベース設定 -->
                <TextBlock Text="データベース接続設定" FontSize="16" FontWeight="SemiBold" Margin="0,0,0,12"/>
                <TextBlock TextWrapping="Wrap" Foreground="#666" Margin="0,0,0,16"
                           Text="データベースモードを使用する場合の接続情報を設定してください。"/>

                <!-- サーバー名 -->
                <TextBlock Text="サーバー名" Margin="0,0,0,4" Foreground="#555"/>
                <TextBox Text="{Binding DbServer, UpdateSourceTrigger=PropertyChanged}"
                         Margin="0,0,0,12" Padding="8"/>

                <!-- データベース名 -->
                <TextBlock Text="データベース名" Margin="0,0,0,4" Foreground="#555"/>
                <TextBox Text="{Binding DbName, UpdateSourceTrigger=PropertyChanged}"
                         Margin="0,0,0,12" Padding="8"/>

                <!-- Windows認証チェックボックス -->
                <CheckBox Content="Windows認証を使用する"
                          IsChecked="{Binding UseIntegratedSecurity}"
                          Margin="0,0,0,12" FontSize="14"/>

                <!-- ユーザー名 -->
                <TextBlock Text="ユーザー名" Margin="0,0,0,4" Foreground="#555"
                           IsEnabled="{Binding IsUserPasswordEnabled}"/>
                <TextBox Text="{Binding DbUsername, UpdateSourceTrigger=PropertyChanged}"
                         IsEnabled="{Binding IsUserPasswordEnabled}"
                         Margin="0,0,0,12" Padding="8"/>

                <!-- パスワード -->
                <TextBlock Text="パスワード" Margin="0,0,0,4" Foreground="#555"
                           IsEnabled="{Binding IsUserPasswordEnabled}"/>
                <PasswordBox x:Name="PasswordBox"
                             IsEnabled="{Binding IsUserPasswordEnabled}"
                             PasswordChanged="PasswordBox_PasswordChanged"
                             Margin="0,0,0,12" Padding="8"/>

                <!-- 接続テストボタン -->
                <Button Content="接続テスト" Command="{Binding TestConnectionCommand}"
                        Padding="16,8" HorizontalAlignment="Left"
                        Background="#4CAF50" Foreground="White" BorderThickness="0" Cursor="Hand"
                        IsEnabled="{Binding IsTesting, Converter={StaticResource InverseBooleanConverter}}"/>
            </StackPanel>
        </ScrollViewer>

        <!-- ステータスバー -->
        <Border Grid.Row="2" Background="#F5F5F5" Padding="16" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <TextBlock Text="{Binding StatusMessage}" Foreground="#555" FontSize="12"/>
        </Border>

        <!-- ボタン -->
        <Border Grid.Row="3" Background="#F5F5F5" Padding="16" BorderBrush="#E0E0E0" BorderThickness="0,1,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="保存" Command="{Binding SaveCommand}" Click="SaveButton_Click"
                        Padding="24,8" Margin="0,0,8,0"
                        Background="#2196F3" Foreground="White" BorderThickness="0" Cursor="Hand"/>
                <Button Content="キャンセル" Click="CancelButton_Click"
                        Padding="24,8"
                        Background="#757575" Foreground="White" BorderThickness="0" Cursor="Hand"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
